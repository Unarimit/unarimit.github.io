# èµ„æºç®¡ç†

Unityæä¾›`Resources`ã€`AssetsBundle`(ä¿—ç§°abåŒ…)å’Œ`Addressable`APIç”¨äºç®¡ç†èµ„æºã€‚
> Unity2018ä¹‹å‰å…³äºè‡ªè¡Œæ„å»ºä½¿ç”¨`AssetsBundle`çš„èµ„æºç®¡ç†çš„æ–¹æ¡ˆå·²è¢«æ ‡è®°ä¸º"out of date"ï¼Œè¢«`Addressable`æ›¿ä»£ã€‚

ä»¥ä¸‹æ˜¯è¿™äº›APIçš„åŒºåˆ«ï¼š
- *åœ¨ç¼–è¾‘å™¨ä¸­ç›´æ¥å¼•ç”¨-`AssetDatabase`ï¼šç®€å•æ˜“ç”¨ğŸ˜ï¼Œunityä¼šæŒ‰åœºæ™¯å’Œå…±ç”¨èµ„æºæä¾›ä¸€å®šçš„ç®¡ç†ğŸ¤”ï¼ŒåŒ…ä½“è¿‡å¤§é—®é¢˜ğŸ˜¡ï¼Œä¸æ”¯æŒçƒ­æ›´æ–°ğŸ˜¡
- `Resources`: ç®€å•æ˜“ç”¨ğŸ˜ï¼Œæ–‡ä»¶è¿‡å¤šæ—¶ä¼šå¯¼è‡´[å„ç§é—®é¢˜](https://learn.unity.com/tutorial/assets-resources-and-assetbundles#5c7f8528edbc2a002053b5a6)ğŸ˜¡ï¼Œ[ç¾éš¾æ€§çš„å†…å­˜ç®¡ç†](https://docs.unity3d.com/cn/current/Manual/BestPracticeUnderstandingPerformanceInUnity6.html)ğŸ˜¡ï¼Œæ–‡ä»¶å¤¹ä¸‹èµ„æºå…¨éƒ¨å‘å¸ƒğŸ˜¡ï¼Œä¸æ”¯æŒçƒ­æ›´æ–°ğŸ˜¡
- `AssetsBundle`: æ ¹æ®éœ€è¦è£…è½½å’Œå¸è½½èµ„æºğŸ˜ï¼Œä¾èµ–é—®é¢˜å’Œè£…è½½å¸è½½æ§åˆ¶ä½¿ç®¡ç†è¾ƒä¸ºå›°éš¾ğŸ˜¡
- `Addressable`(ä¸€å¥—`AssetsBundle`çš„ç®¡ç†æ–¹æ¡ˆ): åˆ†ç»„ç®¡ç†ğŸ˜ï¼Œå¼‚æ­¥åŠ è½½ğŸ˜ï¼Œæœ‰ä¸€å®šå­¦ä¹ æˆæœ¬ğŸ˜…

å¯¹äºè¾ƒå°çš„é¡¹ç›®æˆ–ä¸éœ€è¦é¢‘ç¹æ›´æ–°èµ„æºçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ç®€å•çš„ Resource ç®¡ç†æ–¹å¼ã€‚è€Œå¯¹äºå¤§å‹é¡¹ç›®æˆ–éœ€è¦åŠ¨æ€åŠ è½½å’Œæ›´æ–°èµ„æºçš„æƒ…å†µä¸‹ï¼Œæ›´æ¨èä½¿ç”¨çµæ´»çš„ Addressable æ–¹å¼æ¥ç®¡ç†èµ„æºã€‚
> ä¹Ÿæœ‰ä¸€äº›å·¥ä½œå®¤ä¼šå†™ä¸€å¥—é€»è¾‘ç®¡ç†`AssetsBundle`

## Resources

::: warning
Resources æ–‡ä»¶å¤¹æ˜¯ Unity é¡¹ç›®ä¸­è®¸å¤šå¸¸è§é—®é¢˜çš„æ¥æºã€‚Resources æ–‡ä»¶å¤¹çš„ä½¿ç”¨ä¸å½“ä¼šä½¿é¡¹ç›®æ„å»ºå‡ºç°è†¨èƒ€ï¼Œå¯¼è‡´å†…å­˜æ¶ˆè€—è¿‡é«˜ï¼Œå¹¶æ˜¾è‘—å¢åŠ åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶é—´ã€‚
:::

ç”¨äºåŠ¨æ€çš„è½½å…¥prefabï¼Œè´´å›¾ç­‰ç´ æ(ä¸éœ€è¦åœ¨inspectorä¸­æ‹–åŠ¨)ã€‚ç›¸å¯¹äºæ”¾åœ¨å…¶ä»–åœ°æ–¹çš„èµ„æºï¼ŒResourceä¸‹çš„å¿…å®šä¼šè¢«æ‰“åŒ…å‘å¸ƒï¼Œå…¶ä»–èµ„æºåªæœ‰åœ¨æ‰“åŒ…çš„åœºæ™¯ä½¿ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šè¢«æ‰“åŒ…å‘å¸ƒã€‚

<center>
<br><img width='600' src='../img/Resources-2.png'></br>
<br>ç›¸æ¯”äºåœ¨editorä¸­ç›´æ¥å¼•ç”¨èµ„æºçš„æŒ‰éœ€æ‰“åŒ…ï¼Œresourceæ–‡ä»¶å¤¹ä¸‹çš„èµ„æºåˆ™ä¼šé€šé€šæ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶</br>
</center>

Resourcesçš„å·¥ä½œæµç¨‹åˆ†ä¸ºä¸¤ä¸ªä¸ªæ­¥éª¤ï¼š

1. å‡†å¤‡èµ„æºï¼šæŠŠèµ„æºæ”¾åœ¨`[é¡¹ç›®å]\Assets\...\Resources\`ä¸‹ ( `...`å¯ä»¥åŒ…å«å¤šä¸ªç›®å½•ï¼Œä¹Ÿå¯ä»¥ä¸ºç©º)
2. ä½¿ç”¨èµ„æºï¼šé€šè¿‡`Resources.Load`è½½å…¥èµ„æºã€‚å¦‚ï¼š`Resources.Load<GameObject>("shpere");`ï¼Œè¿™é‡Œé€šè¿‡æ³›å‹é™å®šäº†è½½å…¥ç±»å‹ä¸ºprefab
 
### èµ„æºæ˜ å°„è¡¨

ä¸ºäº†é˜²æ­¢`Resources`æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶ç»“æ„å˜åŠ¨å¯¹æ£€ç´¢èµ„æºé€ æˆå½±å“ï¼Œå¯ä»¥é€šè¿‡å†™editorè„šæœ¬ï¼Œé…ç½®èµ„æºæ˜ å°„è¡¨çš„æ–¹å¼è§£å†³è¿™ä¸€é—®é¢˜ã€‚

å…¶ä¸­ï¼Œèµ„æºæ˜ å°„è¡¨åº”å†™å…¥`SteamingAssests`æ–‡ä»¶å¤¹ä¸‹ï¼Œä¾¿äºè¯»å–

## AssetsBundle

AssetsBundleå¯ä»¥è§£å†³åŒ…ä½“è¿‡å¤§å’Œå¯åŠ¨æ—¶çš„åŠ è½½æ—¶é—´è¿‡é•¿é—®é¢˜ã€‚

ä½†å°±å¦‚å¼€å¤´æ‰€æè¿°çš„é‚£æ ·ï¼ŒAssetsBundleçš„ç®¡ç†æ¯”è¾ƒå›°éš¾ï¼Œä½†å¦‚æœåªæ˜¯æƒ³åˆæ­¥ä½“éªŒä»–çš„æµç¨‹ï¼Œåˆ™ååˆ†ç®€å•ï¼Œä¸‹é¢ä¼šä»‹ç»ä¸€ä¸ªç®€å•çš„ä½¿ç”¨æ ·ä¾‹ï¼ŒåŒ…æ‹¬èµ„æºçš„æ‰“åŒ…å’ŒåŠ è½½é€»è¾‘ã€‚

å¦‚[Unityæ–‡æ¡£ä¸­](https://docs.unity3d.com/cn/current/Manual/AssetBundles-Workflow.html)æè¿°çš„é‚£æ ·ï¼ŒAssetsBundleçš„å·¥ä½œæµç¨‹åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š
1. ä¸º AssetBundle åˆ†é…èµ„æº
    - åœ¨Assetå¯¹è±¡çš„ Inspector åº•éƒ¨

<img src='../img/Resources-1.png'>

2. æ„å»º AssetBundle
    - éœ€è¦å†™ä¸€ä¸ªç®€å•çš„Editorè„šæœ¬ï¼Œä¸»è¦é€šè¿‡ `BuildPipeline.BuildAssetBundles` æ–¹æ³•
3. åŠ è½½ AssetBundle å’Œèµ„æº(Asset)
    - é€šè¿‡æ–‡ä»¶åŠ è½½AssetBundleï¼šä¸»è¦é€šè¿‡ `AssetBundles.LoadFromFile` æ–¹æ³•
    - é€šè¿‡ç½‘ç»œåŠ è½½AssetBundleï¼šä¸»è¦é€šè¿‡ `UnityEngine.Networking.UnityWebRequestAssetBundle.GetAssetBundle` æ–¹æ³•
    - ä½¿ç”¨èµ„æºï¼šé€šè¿‡`bundle.LoadAsset`æ–¹æ³•è·å–AssetBundleä¸­çš„èµ„æºï¼Œå¦‚`bundle.LoadAsset<GameObject>("Cube");`

å…¶ä¸­æ¶‰åŠC#è„šæœ¬çš„å†…å®¹[Unityæ–‡æ¡£ä¸­](https://docs.unity3d.com/cn/current/Manual/AssetBundles-Workflow.html)éƒ½ç»™å‡ºäº†ç®€å•çš„æ ·ä¾‹ã€‚

### AssetsBundleçš„ç®¡ç†é—®é¢˜

> ä»¥ä¸‹å°†AssetsBundleç»Ÿç§°ä¸ºabåŒ…

ä¸Šè¿°ç”¨ä¾‹å¹¶æ²¡æœ‰è€ƒè™‘æ‰“åŒ…å’Œè§£åŒ…çš„å„ç§é—®é¢˜ï¼š
- æ‰“åŒ…æ—¶ï¼š
    - èµ„æºå’ŒåŒ…æ²¡æœ‰å»ºç«‹å¯¹åº”å…³ç³»çš„é—®é¢˜ï¼ˆç¨‹åºå‘˜éœ€è¦çŸ¥é“å“ªä¸ªèµ„æºåœ¨å“ªä¸ªåŒ…ä¸­ï¼Œå…ˆåŠ è½½åä½¿ç”¨ï¼Œä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼‰
    - èµ„æºçš„ä¾èµ–å’Œå¾ªç¯å¼•ç”¨é—®é¢˜
    - å¯èƒ½å› ä¸ºå¼•ç”¨å¤šæ¬¡æ‰“åŒ…åŒä¸€ä¸ªèµ„æºçš„é—®é¢˜
- è§£åŒ…æ—¶ï¼š
    - abåŒ…åœ¨ä½•æ—¶åŠ è½½å¸è½½
    - å¼‚æ­¥åŠ è½½

æ ¹æ®ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨æ‰“åŒ…æ—¶å°±è¦é…ç½®èµ„æºurlåˆ°abåŒ…çš„æ˜ å°„ï¼ˆé€šè¿‡ç›®å½•æˆ–ä¸“é—¨çš„æ˜ å°„è¡¨ï¼‰ï¼Œå¹¶ä¸”å¯¹äºä¾èµ–èµ„æºä¹Ÿè¦æœ‰åŠ è½½ç­–ç•¥ï¼ˆè®¾ç½®abåŒ…ä¹‹é—´çš„å±‚çº§ï¼Œé¿å…ç¯å’Œé‡å¤åŠ è½½ï¼‰ï¼Œå¦‚æœå‡ºç°é—®é¢˜éœ€è¦æŠ¥é”™æç¤ºã€‚æœ€ååº”è¯¥ç”Ÿæˆèµ„æºæè¿°è¡¨ï¼Œæè¿°abåŒ…ä¸­çš„èµ„æºå’Œä¾èµ–å…³ç³»ï¼Œæ–¹ä¾¿æŒ‰éœ€è§£åŒ…
> æŸ¥æ‰¾èµ„æºçš„ä¾èµ–ä½¿ç”¨ `AssetDatabase.GetDependencies` æ–¹æ³•

åœ¨è§£åŒ…æ—¶ï¼Œåˆ™è¦ç»´æŠ¤abåŒ…å’Œå…¶ä¸­èµ„æºçš„ä½¿ç”¨æƒ…å†µï¼ˆå¯ä»¥ä½¿ç”¨å¼•ç”¨è®¡æ•°ï¼‰ï¼Œåœ¨ä¸è¢«ä½¿ç”¨æ—¶å¸è½½ã€‚ä¹Ÿè¦æä¾›å¼‚æ­¥åŠ è½½çš„ç­–ç•¥ï¼Œé˜²æ­¢åŠ è½½æ—¶â€œæš‚åœâ€ä¸»çº¿ç¨‹å½±å“åŠ è½½UIçš„æ›´æ–°æˆ–æ¸¸æˆé€»è¾‘çš„æ­£å¸¸è¿è¡Œã€‚

ä¸€å®šè¦æ³¨æ„abåŒ…çš„ç®¡ç†é—®é¢˜ï¼Œè®¾è®¡å¥½æ–¹æ¡ˆä¹Ÿè¦å¤šæ¬¡æµ‹è¯•ã€‚å¦‚æœæ²¡æœ‰åˆæ ¼çš„ç®¡ç†ï¼Œå°±èƒ½çœ‹åˆ°ç†Ÿæ‚‰çš„ç²‰çº¢è‰²ç‰©ä½“å•¦~

<img width='300' src='../img/Resources-3.png'>

## Addressable

https://www.youtube.com/watch?v=XIHINtB2e1U æœ‰ä¸€äº›å›¾ï¼ŒæŒºå¥½çš„ï¼Œæœ‰ç©ºæŠ„ä¸€ä¸‹
WIP

## å‚è€ƒ
- [Unityèµ„æºç®¡ç†æ–¹æ¡ˆ Addressableè¯¦è§£ - changyunçš„æ–‡ç«  - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/635796583)
- [Unityèµ„æºç®¡ç†ç³»åˆ—ï¼šUnity Addressableèµ„æºç®¡ç†å®æˆ˜ - é²¨é±¼è¾£æ¤’çš„æ–‡ç«  - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/541893117)
- [AssetDatabase - Unity Doc](https://docs.unity3d.com/cn/current/Manual/AssetDatabase.html)
- [AssetBundle - Unity Doc](https://docs.unity3d.com/cn/current/Manual/AssetBundlesIntro.html)
- [Addressables Manual - Unity Doc](https://docs.unity3d.com/Packages/com.unity.addressables@1.20/manual/index.html)
- [Assets, Resources and AssetBundles #The Resource Folder - Untiy Learn](https://learn.unity.com/tutorial/assets-resources-and-assetbundles#5c7f8528edbc2a002053b5a6)